# Алгоритм лифта (Elevator algorithm)

Производительность чтения и записи данных на магнитных дисках зависит не столько от скорости вращения пластин,  
сколько от того, **как часто и куда перемещается считывающая головка**.  
Каждое перемещение между дорожками стоит миллисекунд, и при больших объёмах данных  
количество таких «прыжков» становится критичным фактором времени доступа.

Чтобы минимизировать время перемещений, был разработан **алгоритм лифта (Elevator algorithm)**,  
также известный как **SCAN**.

---

## Принцип работы

Головка перемещается вдоль цилиндров диска **в одном направлении**,  
обслуживая все запросы, которые лежат на её пути.  
Когда она доходит до последнего цилиндра, с которым нужно было работать в текущей итерации,  
направление меняется — и головка «едет» обратно, обрабатывая новые запросы по пути назад.

> Название «лифт» появилось по аналогии с движением настоящего лифта:  
> он поднимается вверх, забирая пассажиров по пути, а потом спускается вниз,  
> обслуживая тех, кому нужно на нижние этажи.

---

## Преимущества

- **Минимизация числа перемещений головки.**  
  Сокращается общее время seek’ов и повышается средняя производительность диска.

- **Равномерное время отклика.**  
  Избегается ситуация, когда «дальние» запросы обслуживаются слишком поздно  
  (в отличие от наивного алгоритма FIFO — *First In, First Out*).

- **Более предсказуемое поведение.**  
  Запросы, расположенные близко друг к другу по цилиндрам, обслуживаются почти последовательно.

---

## Улучшенные версии

- **C-SCAN (Circular SCAN)**  
  После достижения конца головка **возвращается сразу в начало**,  
  не обрабатывая запросы по пути обратно.  
  Это обеспечивает *равномерное время задержки* для всех запросов.

- **LOOK и C-LOOK**  
  Модификации, где головка **не доходит до края диска**,  
  если там нет запросов.  
  Она «смотрит» (*look ahead*), есть ли запросы дальше,  
  и разворачивается раньше, если нет нужды идти до конца.

---

## Пример

Пусть есть запросы на цилиндрах:  
`10, 22, 20, 2, 40, 6, 38`  
и головка сейчас находится на цилиндре **10**, двигаясь вверх.

**Порядок обслуживания (SCAN):**

```
10 → 20 → 22 → 38 → 40 → 6 → 2
```

Сначала все запросы выше текущего положения,  
затем головка меняет направление и обрабатывает нижние.

---

## Итог

**Алгоритм лифта (SCAN)** — это метод планирования обращений к диску,  
который минимизирует механические перемещения головки  
и балансирует время отклика для множества запросов.

Он лёг в основу современных **планировщиков ввода-вывода**  
в операционных системах (Linux, Windows, BSD),  
но в эпоху **SSD**, где механического движения нет,  
его роль стала в основном исторической —  
однако принципы оптимизации последовательного доступа  
до сих пор применяются при проектировании IO-планировщиков.

---

### Связанные темы

- [Геометрия пластин и цилиндров](../PhysicalLayer/DiskGeometry.md)
- [Буферизация и предзагрузка данных](../PhysicalLayer/Caching_and_Buffering.md)
- [Оптимизация последовательного доступа](../PhysicalLayer/SequentialAccess.md)
- [RAID и распределение блоков](../Redundancy/RAID_Levels.md)
