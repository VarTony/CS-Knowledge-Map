---
title: Модель внешней памяти (External Memory Model, I/O-модель)
---

# Модель внешней памяти (External Memory Model, I/O-модель)


Возникла как ответ на ограниченность RAM-модели.  
В реальных системах основной узкий ресурс — не арифметика, а **ввод-вывод**:  
данные не помещаются в оперативную память и хранятся на диске или SSD.  

Время обращения к диску на порядки больше, чем выполнение операций в памяти,  
и игнорировать это уже нельзя.  

**External Memory Model (I/O-модель)** — это абстракция для оценки алгоритмов,  
когда данные обрабатываются **блоками**, а не отдельными ячейками.

---

## Основные допущения I/O-модели

1. **Ограниченная память.**  
   В памяти может находиться только `M` элементов, где `M` существенно меньше общего числа данных `N`.

2. **Блочная организация данных.**  
   Данные хранятся на диске в блоках фиксированного размера `B`.  
   Алгоритм не может загрузить меньше блока.  
   Стоимость операции определяется **числом обращений к диску (I/O)**,  
   а не числом элементарных инструкций.

3. **Сложность по числу блоков.**  
   Доступ к данным последовательно дороже только количеством блоков,  
   а не числом элементов внутри блока.

---

## Где применяется I/O-модель

I/O-модель используется для анализа алгоритмов и структур данных  
на больших объёмах, когда RAM уже не помещает всё в себя.

Примеры применения:

1. **Сортировка данных**, которые не помещаются в RAM (например, TPMMS).  
2. **Построение и обход индексов** (B-деревья и их варианты).  
3. **Алгоритмы JOIN** в СУБД, где таблицы могут быть в десятки раз больше памяти.  
4. **Big Data-системы** — MapReduce, Hadoop, Spark —  
   сложность определяется потоками блоков, а не арифметикой.

---

## Пример

Если у нас есть таблица объёмом **100 ГБ** и память **1 ГБ**,  
то RAM-модель скажет, что сортировка — это `O(N log N)`.

I/O-модель уточнит: потребуется **N/B** чтений блоков и столько же записей.  
Алгоритм анализируется по **числу операций ввода-вывода**, а не по арифметике.

Где:

- `N` — общее количество элементов данных (например, записей в таблице или чисел в массиве);  
- `B` — размер блока, то есть сколько элементов умещается в одном чтении/записи с диска.

**Пример расчёта:**

```
N = 1 000 000 записей
B = 1 000 записей
```


Чтобы прочитать всю таблицу, нужно `N / B = 1 000 000 / 1 000 = 1 000` операций чтения блока.

---

## Интересный факт

**B-деревья** и **B+деревья** появились как прямой ответ на I/O-модель.  
Они минимизируют число обращений к диску, подстраивая ветвление под размер блока.  

Благодаря этому одна страница диска содержит **сотни ключей**,  
и глубина дерева уменьшается до **2–3 уровней** даже для миллиардов записей.

---

## Итог

**External Memory Model (I/O-модель)** — это абстракция,  
в которой главным ресурсом считается **количество операций чтения и записи блоков**  
на внешнем носителе.  

Она нужна там, где данные **не помещаются в RAM**,  
а скорость работы определяется не арифметикой, а **диском**.

---

### Связанные темы

- [RAM-модель вычислений](./Theory/RAM_Model.md)  
- [Предварительная подгрузка и буферизация данных](../PhysicalLayer/Prefetching_and_Buffering.md)  
- [TPMMS — внешняя сортировка](../../../Algorithms/IO_Model/TPMMS.md)  
- [Индексы на основе B+-дерева](../../DBMS/Indexing/B_Trees.md)
